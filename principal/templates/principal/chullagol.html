{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chullagol - Apuestas</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Teko:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'principal/style.css' %}">
</head>
<body class="chullagol-body">
    {% include 'principal/navbar.html' %}
    <div class="chullagol-container container-fluid">
        <main class="chullagol-main">
            <h2 class="section-title">Partidos Disponibles</h2>
            
            <article class="chullagol-card">
                <div class="match-info">
                    <h3>Nueva Generacion vs. Juventus</h3>
                    <p>LigaPro Serie A | Hoy, 19:00</p>
                </div>
                <div class="chullagol-betting-options">
                    <div class="chullagol-bet-option">
                        <label for="bet-ldu">Apostar por Liga de Quito:</label>
                        <input type="number" id="bet-ldu" class="chullagol-bet-amount form-control" placeholder="$ 0.00">
                        <button class="chullagol-bet-button">Apostar</button>
                    </div>
                    <div class="chullagol-bet-option">
                        <label for="bet-empate1">Apostar por Empate:</label>
                        <input type="number" id="bet-empate1" class="chullagol-bet-amount form-control" placeholder="$ 0.00">
                        <button class="chullagol-bet-button">Apostar</button>
                    </div>
                    <div class="chullagol-bet-option">
                        <label for="bet-bsc">Apostar por Barcelona SC:</label>
                        <input type="number" id="bet-bsc" class="chullagol-bet-amount form-control" placeholder="$ 0.00">
                        <button class="chullagol-bet-button">Apostar</button>
                    </div>
                </div>
            </article>

            <article class="chullagol-card">
                <div class="match-info">
                    <h3>Independiente del Valle vs. Emelec</h3>
                    <p>LigaPro Serie A | Mañana, 16:00</p>
                </div>
                <div class="chullagol-betting-options">
                    <div class="chullagol-bet-option">
                        <label for="bet-idv">Apostar por IDV:</label>
                        <input type="number" id="bet-idv" class="chullagol-bet-amount form-control" placeholder="$ 0.00">
                        <button class="chullagol-bet-button">Apostar</button>
                    </div>
                    <div class="chullagol-bet-option">
                        <label for="bet-empate2">Apostar por Empate:</label>
                        <input type="number" id="bet-empate2" class="chullagol-bet-amount form-control" placeholder="$ 0.00">
                        <button class="chullagol-bet-button">Apostar</button>
                    </div>
                    <div class="chullagol-bet-option">
                        <label for="bet-emelec">Apostar por Emelec:</label>
                        <input type="number" id="bet-emelec" class="chullagol-bet-amount form-control" placeholder="$ 0.00">
                        <button class="chullagol-bet-button">Apostar</button>
                    </div>
                </div>
            </article>
        </main>

        <aside class="chullagol-aside chullagol-card">
            <h2>Boletín de Apuesta</h2>
            <div id="slip-items">
                <p class="chullagol-empty-slip">No hay apuestas seleccionadas.</p>
            </div>
            <div class="chullagol-slip-total">
                <p>Monto Total: <span id="total-bet">$0.00</span></p>
                <button id="chullagol-place-bet-button" class="bet-button">Realizar Apuestas</button>
            </div>
        </aside>
    </div>
    
    <script src="{% static 'principal/script.js' %}"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
    const betButtons = document.querySelectorAll('.chullagol-bet-button');
    const slipItemsContainer = document.getElementById('slip-items');
    const totalBetElement = document.getElementById('total-bet');
    const placeBetButton = document.getElementById('chullagol-place-bet-button');
    const emptySlipMessage = document.querySelector('.chullagol-empty-slip');

    let bets = [];

    betButtons.forEach(button => {
        button.addEventListener('click', () => {
            const teamName = button.dataset.team;
            const inputId = button.dataset.inputId;
            const amountInput = document.getElementById(inputId);
            const amount = parseFloat(amountInput.value);

            if (isNaN(amount) || amount <= 0) {
                alert('Por favor, ingresa un monto válido para apostar.');
                return;
            }

            bets.push({ team: teamName, amount: amount });
            amountInput.value = '';
            updateBetSlip();
        });
    });

    function updateBetSlip() {
        if (emptySlipMessage) {
            emptySlipMessage.style.display = bets.length === 0 ? 'block' : 'none';
        }
        
        slipItemsContainer.innerHTML = '';
        if (bets.length === 0) {
            slipItemsContainer.appendChild(emptySlipMessage);
        }

        bets.forEach(bet => {
            const slipItem = document.createElement('div');
            slipItem.classList.add('chullagol-slip-item');
            slipItem.innerHTML = `
                <span class="team-name">${bet.team}</span>
                <span class="bet-amount-text">Monto: $${bet.amount.toFixed(2)}</span>
            `;
            slipItemsContainer.appendChild(slipItem);
        });
        
        const totalBetAmount = bets.reduce((sum, bet) => sum + bet.amount, 0);
        totalBetElement.textContent = `$${totalBetAmount.toFixed(2)}`;
    }

    placeBetButton.addEventListener('click', () => {
        const totalBetAmount = bets.reduce((sum, bet) => sum + bet.amount, 0);
        if (bets.length === 0) {
            alert('No hay ninguna apuesta en tu boletín.');
            return;
        }
        alert(`¡Apuestas realizadas por un total de $${totalBetAmount.toFixed(2)}!`);
        
        bets = [];
        updateBetSlip();
    });
});
    </script>
</body>
</html>
